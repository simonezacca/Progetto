<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:pf="http://primefaces.org/ui"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:p="http://xmlns.jcp.org/jsf/passthrough">
<h:head>
</h:head>
<h:body>
	<ui:composition template="/templates/layoutGestore.xhtml">
		<ui:define name="content">
			<div class="container">
				<div class="ui segment">
					<h:panelGroup rendered="#{not StrutturaBB.addingStruttura}">
						<h2 class="ui left floated header">
							<h:link value="Annulla" outcome="#{utenteBean.homePageName}"/>
						</h2>
						<h2 class="ui right floated header">
							<button class="ui button">Aggiungi nuova struttura</button>
						</h2>
					</h:panelGroup>
					<h3 class="ui header" align="center">Gestione struttura</h3>

					<!-- inizio pannello messaggi errore -->
					<h:panelGroup rendered="false">
						<div class="ui error message">
							<i class="close icon"></i>
							<div class="header">Sono presenti degli errori:</div>
							<h:messages styleClass="list">
							</h:messages>
						</div>
					</h:panelGroup>
					<!-- fine pannello messaggi errore -->

					<h:panelGroup rendered="#{StrutturaBB.addingStruttura}">
						<h:form styleClass="ui form" id="formGeneraleStruttura">
							<h4 class="ui dividing header">Dati Generali</h4>
							<div class="field">
								<div class="two fields">
									<div class="field">
										<label>Nome struttura</label>
										<h:inputText id="inputNomeStruttura" p:placeholder="Nome struttura"
											value="#{StrutturaBB.strutturaCorrente.nomeStruttura}" required="true"/>
										<h:message for="inputNomeStruttura" errorStyle="ui error message"></h:message>
									</div>
									<div class="field">
										<label>Indirizzo</label>
										<h:inputText id="inputIndirizzoStruttura" p:placeholder="Indirizzo struttura"
											value="#{StrutturaBB.strutturaCorrente.indirizzoLuogo}" required="true" />
										<h:message for="inputIndirizzoStruttura" errorStyle="ui error message"></h:message>
									</div>
								</div>
							</div>
							<!-- inizio autocomplete luogo -->
							<div class="field">
								<div class="ui fluid input">
									<pf:autoComplete
										value="#{StrutturaBB.strutturaCorrente.luogoStruttura}"
										completeMethod="#{StrutturaBB.completaLuoghiDisponibili}"
										var="luogoBean" itemLabel="#{luogoBean.nomeComune}"
										itemValue="#{luogoBean}" converter="#{luogoBeanConverter}"
										minQueryLength="3" forceSelection="true" required="true"
										maxResults="10" />
								</div>
							</div>
							<!-- fine autocomplete luogo -->

							<div class="field">
								<label>Descrizione Locazione:</label>
								<div class="ui form" />
								<div class="field">
									<h:inputTextarea
										value="#{StrutturaBB.strutturaCorrente.descrizioneStruttura}" required="true"/>
								</div>
							</div>
							
							<div class="field">
								<label>Giorni minimi per cancellazione:</label>
								<div class="ui form" />
								<div class="field">
									<h:inputText value="#{StrutturaBB.strutturaCorrente.giorniPerCancellazione}" required="true" />
								</div>
							</div>
							
							<div class="field">
								<h:panelGroup>
								<ui:repeat var="FAQStrutturaBean" value="#{StrutturaBB.strutturaCorrente.elencoFAQ}">
								Domanda: <h:outputText value="#{FAQStrutturaBean.domanda}"></h:outputText><br/>
								<label>Risposta: </label> <h:inputText value="#{FAQStrutturaBean.risposta}"/>
								</ui:repeat>
								</h:panelGroup>
							</div>
							

							<!-- inizio foto gallery -->
							<h4 class="ui dividing header">Photogallery</h4>
							<div class="ui segment">
								<h:graphicImage library="images" name="square-image.png"
									styleClass="ui small image bordered spaced" />
								<h:graphicImage library="images" name="square-image.png"
									styleClass="ui small image bordered spaced" />
								<h:graphicImage library="images" name="square-image.png"
									styleClass="ui small image bordered spaced" />
							</div>
							<!-- fine foto gallery -->
							<h:panelGroup
								rendered="#{not empty StrutturaBB.strutturaCorrente.camereInserite}">
								<div class="ui clearing divider"></div>
								<h4 class="ui dividing header">Camere inserite</h4>
								<ui:repeat var="camera"
									value="#{StrutturaBB.strutturaCorrente.camereInserite}">
									<div class="ui segment">
										<div class="three fields">
											<div class="field">
												<h3>
													<h:outputText value="#{camera.nomeCamera}"
														p:placeholder="Nome della camera" />
												</h3>
											</div>
											<div class="two field">
												<div class="field">
													<div class="field">
														<h:outputText value="#{camera.dataInizioAffitto}"
															p:placeholder="Data inizio affitto">
															<f:converter converterId="LocalDateConverter" />
														</h:outputText>
													</div>
													<div class="field">
														<h:outputText value="#{camera.dataFineAffitto}"
															p:placeholder="Data fine affitto">
															<f:converter converterId="LocalDateConverter" />
														</h:outputText>
													</div>
												</div>
												<div class="two field">
													<div class="field">
														<h:outputText value="#{camera.pax}" />
													</div>
													<div class="field">
														Prezzo per notte: <h:outputText value="#{camera.prezzo}" />
													</div>
													<div class="field">
														<h:outputText value="#{camera.descrizioneCamera}" />
													</div>
													<div class="field">
														<h:commandButton value="Modifica" styleClass="ui button"
															action="#{StrutturaBB.modificaCamera(camera)}" />
														<h:commandButton value="Elimina"
															styleClass="ui button red"
															action="#{StrutturaBB.eliminaCamera(camera)}" />
													</div>
												</div>
											</div>
										</div>
									</div>
								</ui:repeat>
							</h:panelGroup>

							<!-- inizio sezione aggiunta camera -->
							<div class="field">
								<div class="ui clearing divider"></div>
								<h:form>
								<div class="ui segment">
									<h4 class="ui dividing header">Aggiungi Camera</h4>
									<div class="three fields">
										<div class="field">
											<label>Nome della camera</label>
											<h:inputText id="inputNomeCameraAggiunte"
												value="#{StrutturaBB.cameraInAggiunta.nomeCamera}"
												p:placeholder="Nome della camera" required="true">
												<f:validateLength minimum="1" />
											</h:inputText>
											<h:message id="inputNomeCameraAggiunteErrMsg" for="inputNomeCameraAggiunte"></h:message>
										</div>
										<div class="two field">
											<div class="field">
												<label>Data inizio affitto</label>
												<pf:calendar id="fromDate"
													value="#{StrutturaBB.cameraInAggiunta.dataInizioAffitto}"
													required="true" placeholder="Data inizio affitto" readonlyInput="true" converter="LocalDateConverter" pattern="dd/MM/yyyy">
													<pf:ajax event="dateSelect" update="toDate" listener="#{StrutturaBB.settaDataCamera}"/>
												</pf:calendar>
											</div>
											<div class="field">
											<label>Data fine affitto</label>
												<pf:calendar id="toDate"
													value="#{StrutturaBB.cameraInAggiunta.dataFineAffitto}" readonlyInput="true"
													required="true" pattern="dd/MM/yyyy"
													placeholder="Data fine affitto" converter="LocalDateConverter"/>
											</div>
										</div>
										<div class="three field">
											<div class="field">
												<label>Numero pax di persone</label>
												<h:inputText id="inputNumeroPax" value="#{StrutturaBB.cameraInAggiunta.pax}"
													p:placeholder="Numero pax" required="true"></h:inputText>
												<h:message id="inputNumeroPaxErrMsg" for="inputNumeroPax"></h:message>
											</div>
											<div class="field">
												<label>Descrizione camera</label>
												<h:inputTextarea id="inputDescrizioneCameraAggiunta"
													value="#{StrutturaBB.cameraInAggiunta.descrizioneCamera}" required="true"/>
												<h:message id="inputDescrizioneCameraAggiuntaErrMsg" for="inputDescrizioneCameraAggiunta"></h:message>
											</div>
											<label>Prezzo camera per notte</label>
											<div class="ui right labeled input">
												<div class="ui label">&euro;</div>
												<h:inputText id="inputPrezzoPerNotte" value="#{StrutturaBB.cameraInAggiunta.prezzo}"  required="true"/>
												<h:message id="inputPrezzoPerNotteErrMsg" for="inputPrezzoPerNotte"></h:message>
											</div>
										</div>
									</div>
										<h:commandButton value="Aggiungi camera"
											action="#{StrutturaBB.aggiungiCamera}"
											styleClass="ui orange button">
										</h:commandButton>
									</div>
								</h:form>
							</div>

						</h:form>
						<!-- fine sezione aggiunta camera -->

						<!-- inizio sezione aggiunta servizio -->
						<div class="ui segment">
							<h4 class="ui dividing header">Personalizzazione servizi
								disponibili nella piattaforma</h4>
							<div class="two fields">
								<div class="field">
									<button id="addBaseServiceBtn" class="ui orange button">Aggiungi
										servizio base</button>
								</div>
								<div class="field">
									<button id="addPlusServiceBtn" class="ui orange button">Aggiungi
										servizio plus</button>
								</div>
							</div>
						</div>

						<!-- modal servizio base -->
						<div class="ui modal" id="modalBaseService">
							<i class="close icon"></i>
							<div class="header">Aggiungi servizio BASE</div>
							<div class="content">
								<h:form>
									<h:selectOneMenu value="#{StrutturaBB.sccorrente}"
										styleClass="ui fluid selection dropdown"
										converter="#{servizioComuneBeanConverter}">
										<f:selectItems value="#{StrutturaBB.serviziComuniDisponibili}"
											var="sc" itemLabel="#{sc.nomeServizio}" itemValue="#{sc}" />
									</h:selectOneMenu>
									<label>Note per servizio</label>
									<h:inputTextarea value="#{StrutturaBB.dsbcorrente.note}" />
									<div class="actions">
										<h:commandButton value="Aggiungi"
											action="#{StrutturaBB.aggiungiDettaglioServizioBase}"
											styleClass="ui green button"></h:commandButton>
										<div class="ui button">Annulla</div>
									</div>
								</h:form>
							</div>
						</div>

						<!-- modal servizio aggiuntivo -->
						<div class="ui modal" id="modalPlusService">
							<i class="close icon"></i>
							<div class="header">Aggiungi servizio BASE</div>
							<div class="content">
								<h:form>
									<h:selectOneMenu value="#{StrutturaBB.sccorrente}"
										styleClass="ui fluid selection dropdown"
										converter="#{servizioComuneBeanConverter}">
										<f:selectItems value="#{StrutturaBB.serviziComuniDisponibili}"
											var="sc" itemLabel="#{sc.nomeServizio}" itemValue="#{sc}" />
									</h:selectOneMenu>
									<label>Prezzo servizio</label>
									<div class="ui right labeled input">
										<div class="ui label">&euro;</div>
										<h:inputText value="#{StrutturaBB.prezzoDSB}" />
									</div>
									<label>Note per servizio</label>
									<h:inputTextarea value="#{StrutturaBB.dsbcorrente.note}" />
									<div class="actions">
										<h:commandButton value="Aggiungi"
											action="#{StrutturaBB.aggiungiDettaglioServizioPlus}"
											styleClass="ui green button"></h:commandButton>
										<div class="ui button">Annulla</div>
									</div>
								</h:form>
							</div>
						</div>



						<!-- fine sezione aggiunta servizio -->

						<!-- inizio pannello servizi già inseriti -->
						<h:panelGroup
							rendered="#{not empty StrutturaBB.strutturaCorrente.serviziOfferti}">
							<h:form>
								<div class="ui segment">
									<h4 class="ui dividing header">Servizi aggiunti</h4>
									<div class="fields">
										<ui:repeat var="servizio"
											value="#{StrutturaBB.strutturaCorrente.serviziOfferti}">
											<div class="ui form">
												<div class="inline fields">
													<div class="field">
														<div class="ui radio checkbox">
															<h:outputText
																value="#{servizio.servizio.nomeServizio} | #{servizio.tipologia.prezzo} | #{servizio.note}"></h:outputText>
															<h:commandButton
																action="#{StrutturaBB.eliminaDettaglioServizio(servizio)}"
																value="Elimina" styleClass="ui red button" />
														</div>
													</div>
												</div>
											</div>
										</ui:repeat>
									</div>
								</div>
							</h:form>
						</h:panelGroup>
						<!-- fine pannello servizi già inseriti -->

						<h:form>
							<br />
							<h:commandButton value="Salva"
								action="#{StrutturaBB.salvaStruttura}"
								styleClass="ui green button"
								rendered="#{StrutturaBB.strutturaSalvabile}" />
						</h:form>
					</h:panelGroup>
				</div>
			</div>
		</ui:define>
	</ui:composition>
</h:body>
</html>